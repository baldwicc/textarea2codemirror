!function(){function a(a){for(var b=!1,c=a.parentNode;c!==document;){if(null!==c.className.match(/CodeMirror/)){b=!0;break}c=c.parentNode}return b}function b(a){var b=a.defaultCharWidth(),c=4;a.on("renderLine",function(a,d,e){var f=CodeMirror.countColumn(d.text,null,a.getOption("tabSize"))*b;e.style.textIndent="-"+f+"px",e.style.paddingLeft=c+f+"px"}),a.refresh()}function c(a,b){var c=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-30+"px";a.style.position="fixed",a.style.top="30px",a.style.left="0",a.style.width="100%",a.style.height=c,b&&(b[0].style.height=c,b[1].style.height=c)}function d(){var a=document.createElement("div");a.setAttribute("id","cmBar");var b="";b+="<span>language: </span>",b+="<select>",b+="    <option>apl</option>",b+="    <option>asterisk</option>",b+="    <option>clike</option>",b+="    <option>clojure</option>",b+="    <option>cobol</option>",b+="    <option>coffeescript</option>",b+="    <option>commonlisp</option>",b+="    <option>css</option>",b+="    <option>cypher</option>",b+="    <option>d</option>",b+="    <option>diff</option>",b+="    <option>django</option>",b+="    <option>dtd</option>",b+="    <option>dylan</option>",b+="    <option>ecl</option>",b+="    <option>eiffel</option>",b+="    <option>erlang</option>",b+="    <option>fortran</option>",b+="    <option>gas</option>",b+="    <option>gfm</option>",b+="    <option>gherkin</option>",b+="    <option>go</option>",b+="    <option>groovy</option>",b+="    <option>haml</option>",b+="    <option>haskell</option>",b+="    <option>haxe</option>",b+="    <option>htmlembedded</option>",b+="    <option>htmlmixed</option>",b+="    <option>http</option>",b+="    <option>jade</option>",b+="    <option>javascript</option>",b+="    <option>jinja2</option>",b+="    <option>julia</option>",b+="    <option>livescript</option>",b+="    <option>lua</option>",b+="    <option>markdown</option>",b+="    <option>mirc</option>",b+="    <option>mllike</option>",b+="    <option>nginx</option>",b+="    <option>ntriples</option>",b+="    <option>octave</option>",b+="    <option>pascal</option>",b+="    <option>pegjs</option>",b+="    <option>perl</option>",b+="    <option>php</option>",b+="    <option>properties</option>",b+="    <option>puppet</option>",b+="    <option>python</option>",b+="    <option>q</option>",b+="    <option>r</option>",b+="    <option>rpm</option>",b+="    <option>rst</option>",b+="    <option>ruby</option>",b+="    <option>rust</option>",b+="    <option>sass</option>",b+="    <option>scheme</option>",b+="    <option>shell</option>",b+="    <option>sieve</option>",b+="    <option>smalltalk</option>",b+="    <option>smarty</option>",b+="    <option>smartymixed</option>",b+="    <option>solr</option>",b+="    <option>sparql</option>",b+="    <option>sql</option>",b+="    <option>stex</option>",b+="    <option>tcl</option>",b+="    <option>tiddlywiki</option>",b+="    <option>tiki</option>",b+="    <option>toml</option>",b+="    <option>turtle</option>",b+="    <option>vb</option>",b+="    <option>vbscript</option>",b+="    <option>velocity</option>",b+="    <option>verilog</option>",b+="    <option>xml</option>",b+="    <option>xquery</option>",b+="    <option>yaml</option>",b+="    <option>z80</option>",b+="</select>",a.innerHTML=b,document.body.appendChild(a)}function e(){var a=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style"),c="";c+="#cmBar{",c+="  width: 100%; ",c+="  height: 30px; ",c+="  line-height: 30px; ",c+="  position: fixed; ",c+="  top: 0; ",c+="  left: 0; ",c+="  background: #f8f8f8;",c+="  text-align: right;",c+="  border-bottom: 1px solid #ddd;",c+="  z-index:9991;",c+="}",c+="#cmBar select{",c+="  height: 18px;",c+="  font-size: 12px;",c+="  background: #f8f8f8;",c+="  margin-right: 3px;",c+="}",c+="#cmBar span{",c+="  font-size: 12px;",c+="  font-family: arial;",c+="}",c+=".CodeMirror-merge, .CodeMirror{",c+="  z-index:9990;",c+="}",b.type="text/css",b.styleSheet?b.styleSheet.cssText=c:b.appendChild(document.createTextNode(c)),a.appendChild(b)}var f;chrome.storage.sync.get({theme:"default",mode:"htmlmixed"},function(a){f=a});var g=!0;window.addEventListener("keydown",function(h){var i=document.activeElement;if((119==h.keyCode||120==h.keyCode)&&"TEXTAREA"==i.nodeName&&!a(i)){var j,k,l={value:i.value,orig:i.value,highlightDifferences:!0,mode:f.mode,theme:f.theme,lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,foldGutter:!0,autoCloseTags:!0,indentUnit:4,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:{Esc:function(a){i.value=a.getValue(),119==h.keyCode?a.toTextArea():document.body.removeChild(document.querySelector(".CodeMirror-merge")),document.body.removeChild(document.querySelector("#cmBar")),i.select()},"Alt-Q":function(a){a.foldCode(a.getCursor())}}};119==h.keyCode?(k=CodeMirror.fromTextArea(i,l),c(k.display.wrapper)):(j=CodeMirror.MergeView(document.body,l),k=j.edit,k.execCommand("selectAll"),c(document.querySelector(".CodeMirror-merge"),document.querySelectorAll(".CodeMirror-merge .CodeMirror"))),b(k),k.focus(),d(),g&&e();var m=document.querySelector("#cmBar select");m.value=f.mode,m.addEventListener("change",function(){k.setOption("mode",this.value)}),g=!1}},!1)}();