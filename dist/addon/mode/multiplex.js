!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.multiplexingMode=function(b){function c(a,b,c){if("string"==typeof b)return a.indexOf(b,c);var d=b.exec(c?a.slice(c):a);return d?d.index+c:-1}var d=Array.prototype.slice.call(arguments,1),e=d.length;return{startState:function(){return{outer:a.startState(b),innerActive:null,inner:null}},copyState:function(c){return{outer:a.copyState(b,c.outer),innerActive:c.innerActive,inner:c.innerActive&&a.copyState(c.innerActive.mode,c.inner)}},token:function(f,g){if(g.innerActive){var h=g.innerActive,i=f.string;if(!h.close&&f.sol())return g.innerActive=g.inner=null,this.token(f,g);var j=h.close?c(i,h.close,f.pos):-1;if(j==f.pos)return f.match(h.close),g.innerActive=g.inner=null,h.delimStyle;j>-1&&(f.string=i.slice(0,j));var k=h.mode.token(f,g.inner);return j>-1&&(f.string=i),h.innerStyle&&(k=k?k+" "+h.innerStyle:h.innerStyle),k}for(var l=1/0,i=f.string,m=0;e>m;++m){var n=d[m],j=c(i,n.open,f.pos);if(j==f.pos)return f.match(n.open),g.innerActive=n,g.inner=a.startState(n.mode,b.indent?b.indent(g.outer,""):0),n.delimStyle;-1!=j&&l>j&&(l=j)}l!=1/0&&(f.string=i.slice(0,l));var o=b.token(f,g.outer);return l!=1/0&&(f.string=i),o},indent:function(c,d){var e=c.innerActive?c.innerActive.mode:b;return e.indent?e.indent(c.innerActive?c.inner:c.outer,d):a.Pass},blankLine:function(c){var f=c.innerActive?c.innerActive.mode:b;if(f.blankLine&&f.blankLine(c.innerActive?c.inner:c.outer),c.innerActive)"\n"===c.innerActive.close&&(c.innerActive=c.inner=null);else for(var g=0;e>g;++g){var h=d[g];"\n"===h.open&&(c.innerActive=h,c.inner=a.startState(h.mode,f.indent?f.indent(c.outer,""):0))}},electricChars:b.electricChars,innerMode:function(a){return a.inner?{state:a.inner,mode:a.innerActive.mode}:{state:a.outer,mode:b}}}}});