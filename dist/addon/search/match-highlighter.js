!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a){"object"==typeof a&&(this.minChars=a.minChars,this.style=a.style,this.showToken=a.showToken,this.delay=a.delay),null==this.style&&(this.style=h),null==this.minChars&&(this.minChars=g),null==this.delay&&(this.delay=i),this.overlay=this.timeout=null}function c(a){var b=a.state.matchHighlighter;clearTimeout(b.timeout),b.timeout=setTimeout(function(){d(a)},b.delay)}function d(a){a.operation(function(){var b=a.state.matchHighlighter;if(b.overlay&&(a.removeOverlay(b.overlay),b.overlay=null),!a.somethingSelected()&&b.showToken){for(var c=b.showToken===!0?/[\w$]/:b.showToken,d=a.getCursor(),e=a.getLine(d.line),g=d.ch,h=g;g&&c.test(e.charAt(g-1));)--g;for(;h<e.length&&c.test(e.charAt(h));)++h;return void(h>g&&a.addOverlay(b.overlay=f(e.slice(g,h),c,b.style)))}var i=a.getCursor("from"),j=a.getCursor("to");if(i.line==j.line){var k=a.getRange(i,j).replace(/^\s+|\s+$/g,"");k.length>=b.minChars&&a.addOverlay(b.overlay=f(k,!1,b.style))}})}function e(a,b){return!(a.start&&b.test(a.string.charAt(a.start-1))||a.pos!=a.string.length&&b.test(a.string.charAt(a.pos)))}function f(a,b,c){return{token:function(d){return!d.match(a)||b&&!e(d,b)?(d.next(),void(d.skipTo(a.charAt(0))||d.skipToEnd())):c}}}var g=2,h="matchhighlight",i=100;a.defineOption("highlightSelectionMatches",!1,function(e,f,g){if(g&&g!=a.Init){var h=e.state.matchHighlighter.overlay;h&&e.removeOverlay(h),clearTimeout(e.state.matchHighlighter.timeout),e.state.matchHighlighter=null,e.off("cursorActivity",c)}f&&(e.state.matchHighlighter=new b(f),d(e),e.on("cursorActivity",c))})});